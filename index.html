<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Tabla Responsive con Descripción Expandible</title>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.dataTables.min.css">
  <style>
    /* Estilo para truncar descripción en la tabla */
    .descripcion-truncada {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 250px;
    }

    /* Para versión mobile */
    @media (max-width: 768px) {
      .descripcion-truncada {
        max-width: 200px;
      }
    }

    /* Estilo para el detalle expandido */
    table.dataTable.dtr-inline.collapsed > tbody > tr > td.child {
      padding: 1em !important;
    }

    table.dataTable.dtr-inline.collapsed > tbody > tr > td.child table {
      width: 100%;
    }

    table.dataTable.dtr-inline.collapsed > tbody > tr > td.child td {
      padding: 4px 8px;
      word-break: break-word;
      white-space: normal;
    }
  </style>
</head>
<body>

<table id="miTabla" class="display responsive nowrap" style="width:100%">
  <thead>
    <tr>
      <th></th> <!-- Columna para el botón de expansión -->
      <th>PRODUCTO</th>
      <th>DESCRIPCION</th>
      <th>PRECIO</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td></td>
      <td>Galletas</td>
      <td><span class="descripcion-truncada" title="Deliciosas galletas con chispas de chocolate y un toque de vainilla. Perfectas para la merienda o cualquier momento del día.">Deliciosas galletas con chispas de chocolate y un toque de vainilla. Perfectas para la merienda o cualquier momento del día.</span></td>
      <td>$2.99</td>
    </tr>
    <tr>
      <td></td>
      <td>Jugo</td>
      <td><span class="descripcion-truncada" title="Jugo natural de naranja sin azúcar añadida, ideal para el desayuno.">Jugo natural de naranja sin azúcar añadida, ideal para el desayuno.</span></td>
      <td>$1.50</td>
    </tr>
    <tr>
      <td></td>
      <td>Pan integral</td>
      <td><span class="descripcion-truncada" title="Pan artesanal hecho con harina integral, semillas y sin conservantes. Rico en fibra y sabor.">Pan artesanal hecho con harina integral, semillas y sin conservantes. Rico en fibra y sabor.</span></td>
      <td>$3.20</td>
    </tr>
  </tbody>
</table>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
<script>
  $(document).ready(function () {
    $('#miTabla').DataTable({
      responsive: {
        details: {
          type: 'column',
          target: 0,
          renderer: function (api, rowIdx, columns) {
            var data = $.map(columns, function (col, i) {
              if (col.columnIndex === 0) return '';

              // Descripción sin truncar en el detalle
              if (col.title === "DESCRIPCION") {
                return '<tr data-dt-row="'+col.rowIndex+'" data-dt-column="'+col.columnIndex+'">'+
                       '<td><strong>'+col.title+':</strong></td>'+
                       '<td style="white-space: normal; max-width: none;">' + $(col.cell).text() + '</td>'+
                       '</tr>';
              }

              return '<tr data-dt-row="'+col.rowIndex+'" data-dt-column="'+col.columnIndex+'">'+
                     '<td><strong>'+col.title+':</strong></td>'+
                     '<td>'+col.data+'</td>'+
                     '</tr>';
            }).join('');

            return data ? $('<table/>').append(data) : false;
          }
        }
      },
      columnDefs: [
        {
          className: 'control',
          orderable: false,
          targets: 0
        }
      ],
      order: [1, 'asc']
    });
  });
</script>

</body>
</html>
